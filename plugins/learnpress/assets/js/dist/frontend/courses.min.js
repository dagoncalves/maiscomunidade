!function(){const e=(e,t)=>{const r=new URL(e);return Object.keys(t).forEach((e=>{r.searchParams.set(e,t[e])})),r};let t,r,o=!1,s=1;window.lpArchiveRequestCourse=(a,l)=>{const u=lpGlobalSettings.lp_rest_url;if(!u)return;const i=document.querySelector(".lp-archive-courses"),p=i&&i.querySelector("div.lp-archive-courses .lp-content-area"),h=p&&p.querySelector("ul.learn-press-courses");if(!h)return;if(o)return;o=!0,r?h.innerHTML=r:(t=document.querySelector(".lp-archive-course-skeleton"),r=t.outerHTML);const d=e(u+"lp/v1/courses/archive-course",{...a});wp.apiFetch({path:"lp/v1/courses/archive-course"+d.search,method:"GET"}).then((e=>{void 0!==e.data.content&&h&&(h.innerHTML=e.data.content||"");const t=e.data.pagination;n();const r=document.querySelector(".learn-press-pagination");if(r&&r.remove(),void 0!==t){const e=(new DOMParser).parseFromString(t,"text/html").querySelector(".learn-press-pagination");e&&(h.after(e),c())}wp.hooks.doAction("lp-js-get-courses",e),"function"==typeof l&&l(e)})).catch((e=>{h.innerHTML+=`<div class="lp-ajax-message error" style="display:block">${e.message||"Error: Query lp/v1/courses/archive-course"}</div>`})).finally((()=>{o=!1,t&&t.remove(),jQuery("form.search-courses button").removeClass("loading");const r=e(document.location,a);window.history.pushState("","",r),s?s=0:i.scrollIntoView()}))};const n=()=>{document.querySelectorAll("form.search-courses").forEach((e=>{const t=e.querySelector('input[name="c_search"]'),r=e.getAttribute("action"),o=(e.querySelector('[name="post_type"]').value,e.querySelector('[name="taxonomy"]').value,e.querySelector('[name="term_id"]').value,e.querySelector('[type="submit"]'));let s;t.addEventListener("keyup",(e=>{e.preventDefault();const t=e.target.value;(!t||t&&t.length>2)&&(void 0!==s&&clearTimeout(s),s=setTimeout((function(){o.classList.add("loading"),delete lpArchiveSkeleton.paged;const e=new URL(r),s=new URL(document.location);s.searchParams.set("c_search",t);const n=s.searchParams.toString().split("&"),c={};n.forEach(((t,r)=>{const o=t.split("=");c[o[0]]=o[1],e.searchParams.append(o[0],o[1])})),lpArchiveRequestCourse({...c}),window.history.pushState("","",e)}),800))})),e.addEventListener("submit",(t=>{t.preventDefault();const r=e.querySelector('input[name="c_search"]');r&&r.dispatchEvent(new Event("keyup"))}))}))},c=()=>{const e=document.querySelectorAll(".lp-archive-courses .learn-press-pagination .page-numbers");e.length>0&&e.forEach((t=>t.addEventListener("click",(r=>{r.preventDefault(),r.stopPropagation();const o=r.currentTarget.getAttribute("href");if(o){const s=new URL(o),n={};s.searchParams.forEach(((e,t)=>{n[t]=e}));const c=[...e].filter((e=>e.classList.contains("current"))),a=r.currentTarget.textContent||t.classList.contains("next")&&parseInt(c[0].textContent)+1||t.classList.contains("prev")&&parseInt(c[0].textContent)-1;lpArchiveRequestCourse({...n,paged:a}),window.history.pushState("","",o)}}))))};document.addEventListener("DOMContentLoaded",(function(e){document.querySelectorAll(".lp-archive-course-skeleton").length&&lpArchiveSkeleton&&lpArchiveRequestCourse(lpArchiveSkeleton),(()=>{const e=document.querySelectorAll('.lp-archive-courses input[name="lp-switch-layout-btn"]');e.length>0&&e.forEach((e=>e.addEventListener("change",(e=>{e.preventDefault();const t=e.target.value;if(t){const e=document.querySelector(".lp-archive-courses .learn-press-courses[data-layout]");e&&(e.dataset.layout=t),LP.Cookies.set("courses-layout",t)}}))))})(),(()=>{const e=LP.Cookies.get("courses-layout"),t=document.querySelectorAll('.lp-courses-bar .switch-layout [name="lp-switch-layout-btn"]');t.length>0&&[...t].map((t=>t.value===e&&(t.checked=!0)))})()}))}();