if(function(e,t,o){var n,i=e.getElementsByTagName(t)[0];e.getElementById(o)||((n=e.createElement(t)).id=o,n.src="//connect.facebook.net/en_US/sdk.js",i.parentNode.insertBefore(n,i))}(document,"script","facebook-jssdk"),"undefined"!=typeof eltdSocialLoginVars)var facebookAppId=eltdSocialLoginVars.social.facebookAppId;facebookAppId&&(window.fbAsyncInit=function(){FB.init({appId:facebookAppId,cookie:!0,xfbml:!0,version:"v2.5"}),window.FB=FB}),function(e){"use strict";var t={};function o(){var t=e(".eltd-login-opener"),o=e(".eltd-login-register-holder");if(t){var n=e(".eltd-login-register-content");t.click((function(e){e.preventDefault(),o.fadeIn(300),o.addClass("opened")})),o.click((function(e){o.hasClass("opened")&&(o.fadeOut(300),o.removeClass("opened"))})),e(".eltd-login-register-content").click((function(e){e.stopPropagation()})),e(window).on("keyup",(function(e){o.hasClass("opened")&&27==e.keyCode&&(o.fadeOut(300),o.removeClass("opened"))})),n.tabs()}}function n(){e(".eltd-login-form").on("submit",(function(t){t.preventDefault();var o={action:"eltd_membership_login_user",security:e(this).find("#eltd-login-security").val(),login_data:e(this).serialize()};return e.ajax({type:"POST",data:o,url:ElatedMembershipAjaxUrl,success:function(e){var t;a(t=JSON.parse(e)),"success"==t.status&&(window.location=t.redirect)}}),!1}))}function i(){e(".eltd-register-form").on("submit",(function(t){t.preventDefault();var o=e("#eltd-login-content"),n=e("#eltd-register-content"),i={action:"eltd_membership_register_user",security:e(this).find("#eltd-register-security").val(),register_data:e(this).serialize()};return e.ajax({type:"POST",data:i,url:ElatedMembershipAjaxUrl,success:function(e){var t;a(t=JSON.parse(e)),"success"==t.status&&(n.css("display","none"),o.css("display","block"))}}),!1}))}function s(){var t=e(".eltd-reset-pass-form");t.submit((function(o){o.preventDefault();var n={action:"eltd_membership_user_lost_password",user_login:t.find("#user_reset_password_login").val()};e.ajax({type:"POST",data:n,url:ElatedMembershipAjaxUrl,success:function(e){var t=JSON.parse(e);a(t),"success"==t.status&&(window.location=t.redirect)}})}))}function a(t){var o=e(".eltd-membership-response-holder"),n=_.template(e(".eltd-membership-response-template").html())({messageClass:"success"===t.status?"eltd-membership-message-succes":"eltd-membership-message-error",message:t.message});o.html(n)}function l(){e(".eltd-facebook-login-holder").submit((function(t){t.preventDefault(),window.FB.login((function(t){!function(t){"connected"===t.status?(console.log("Welcome! Fetching information from Facebook..."),FB.api("/me","GET",{fields:"id, name, email, link, picture"},(function(t){var o=e(".eltd-facebook-login-holder [name^=eltd_nonce_facebook_login]").val();t.nonce=o,t.image=t.picture.data.url;var n={action:"eltd_membership_check_facebook_user",response:t};e.ajax({type:"POST",data:n,url:ElatedMembershipAjaxUrl,success:function(e){var t;a(t=JSON.parse(e)),"success"==t.status&&(window.location=t.redirect)}})}))):"not_authorized"===t.status?console.log("Please log into this app"):console.log("Please log into Facebook")}(t)}),{scope:"email, public_profile"})}))}function r(){if("undefined"!=typeof eltdSocialLoginVars)var t=eltdSocialLoginVars.social.googleClientId;t?gapi.load("auth2",(function(){window.auth2=gapi.auth2.init({client_id:t}),e(".eltd-google-login-holder").submit((function(t){t.preventDefault(),window.auth2.signIn(),function(){if(window.auth2.isSignedIn.get()){var t=window.auth2.currentUser.get().getBasicProfile(),o=e(".eltd-google-login-holder [name^=eltd_nonce_google_login]").val(),n={action:"eltd_membership_check_google_user",response:{id:t.getId(),name:t.getName(),email:t.getEmail(),image:t.getImageUrl(),link:"https://plus.google.com/"+t.getId(),nonce:o}};e.ajax({type:"POST",data:n,url:ElatedMembershipAjaxUrl,success:function(e){var t;a(t=JSON.parse(e)),"success"==t.status&&(window.location=t.redirect)}})}}()}))})):e(".eltd-google-login-holder").submit((function(e){e.preventDefault()}))}function c(){var t=e("#eltd-membership-update-profile-form");if(t.length){var o=t.find("button"),n=o.data("updating-text"),i=o.data("updated-text");t.on("submit",(function(t){t.preventDefault();var s=o.html();o.html(n);var l={action:"eltd_membership_update_user_profile",data:e(this).serialize()};return e.ajax({type:"POST",data:l,url:ElatedMembershipAjaxUrl,success:function(e){var t;a(t=JSON.parse(e)),"success"==t.status?(o.html(i),window.location=t.redirect):o.html(s)}}),!1}))}}"undefined"!=typeof eltd&&(eltd.modules.socialLogin=t),t.eltdUserLogin=n,t.eltdUserRegister=i,t.eltdUserLostPassword=s,t.eltdInitLoginWidgetModal=o,t.eltdInitFacebookLogin=l,t.eltdInitGooglePlusLogin=r,t.eltdUpdateUserProfile=c,e(document).ready((function(){o(),n(),i(),s(),c()})),e(window).on("load",(function(){l(),r()})),e(window).resize((function(){})),e(window).scroll((function(){}))}(jQuery);